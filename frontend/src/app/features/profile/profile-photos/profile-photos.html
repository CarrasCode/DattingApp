<div class="photos-wrapper">
  <!-- √Årea de Subida (Solo en modo edici√≥n) -->
  @if (editMode()) {
    <form [formGroup]="photoForm" (ngSubmit)="onSubmitPhoto()" class="upload-area">
      <label>
        <span class="icon">‚òÅÔ∏è</span>
        <span>Haz clic para subir una foto</span>
        <input type="file" (change)="onFileSelected($event)" />
      </label>

      @if (selectedFile(); as selectedFile) {
        <p>Archivo seleccionado: {{ selectedFile.name }}</p>
        <div style="margin-top: 1rem; display: flex; gap: 1rem; justify-content: center">
          <input type="text" placeholder="Pie de foto..." formControlName="caption" />
          <label style="flex-direction: row">
            <input type="checkbox" formControlName="is_main" /> Principal
          </label>
        </div>
        <button type="submit" [disabled]="!photoForm.valid || loading()" style="margin-top: 1rem">
          {{ loading() ? 'Subiendo...' : 'Subir Foto' }}
        </button>
      }
    </form>
  }

  <!-- Grid de Fotos -->
  <div class="photos-grid">
    @for (photo of photos(); track photo.id) {
      <div class="photo-card" [class.is-main]="photo.is_main">
        <img [src]="photo.image" [alt]="photo.caption || 'Foto de usuario'" />

        <!-- Acciones (Solo en modo edici√≥n) -->
        @if (editMode()) {
          <div class="actions">
            <button (click)="onDeletePhoto(photo.id)" title="Eliminar foto">üóëÔ∏è</button>
          </div>
        }
      </div>
    } @empty {
      <div class="empty-state">
        <p>üì∏ No tienes fotos a√∫n. ¬°Sube la primera!</p>
      </div>
    }
  </div>
</div>
