@if (state().success) {
  <p class="feedback-msg success">âœ… OperaciÃ³n realizada con Ã©xito!</p>
}

<div class="photos-wrapper">
  <!-- Ãrea de Subida (Solo en modo ediciÃ³n) -->
  @if (editMode()) {
    <form [formGroup]="photoForm" (ngSubmit)="onSubmitPhoto()" class="upload-area">
      <label>
        <span class="icon">â˜ï¸</span>
        <span>Haz clic para subir una foto</span>
        <input type="file" (change)="onFileSelected($event)" />
      </label>

      @if (selectedFile(); as selectedFile) {
        <p>Archivo seleccionado: {{ selectedFile.name }}</p>
        <div style="margin-top: 1rem; display: flex; gap: 1rem; justify-content: center">
          <input type="text" placeholder="Pie de foto..." formControlName="caption" />
          <label style="flex-direction: row">
            <input type="checkbox" formControlName="is_main" /> Principal
          </label>
        </div>
        <button
          type="submit"
          [disabled]="!photoForm.valid || state().loading"
          style="margin-top: 1rem"
        >
          {{ state().loading ? 'Subiendo...' : 'Subir Foto' }}
        </button>
      }
    </form>
  }

  <!-- Grid de Fotos -->
  <div class="photos-grid">
    @for (photo of photos(); track photo.id) {
      <div class="photo-card" [class.is-main]="photo.is_main">
        <img [src]="photo.image" [alt]="photo.caption || 'Foto de usuario'" />

        <!-- Acciones (Solo en modo ediciÃ³n) -->
        @if (editMode()) {
          <div class="actions">
            <button (click)="onDeletePhoto(photo.id)" title="Eliminar foto">ğŸ—‘ï¸</button>
          </div>
        }
      </div>
    } @empty {
      <div class="empty-state">
        <p>ğŸ“¸ No tienes fotos aÃºn. Â¡Sube la primera!</p>
      </div>
    }
  </div>
</div>
